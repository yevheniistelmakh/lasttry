
pipeline {
    agent {
        docker { 
          image 'yevhenii1991/myjenkins-slave:latest' 
        }
    }
    environment {
      DOCKERHUB_CREDENTIALS = credentials('jemkins-dockerhub')
    }
  stages {
    stage("update jenkins job"){
      steps {
        script {
          echo "Test-00001"
        }
      }
    }
  }
  stage('Build') {
            steps { 
	         sh 'docker ps -a'
		}
	 }
   stage('login') {
     steps {
		  sh 'echo $DOCKERHUB_CREDENTIALS_PSW |  docker login -u $DOCKERHUB_CREDENTIALS_USR --password-stdin'
    		  }
		}
	  stage('Push') {
	    steps {
		sh 'docker push yevhenii1991/wordpress:latest'
		}
         }
}
